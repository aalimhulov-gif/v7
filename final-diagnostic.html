<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–§–∏–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –±—é–¥–∂–µ—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .log {
        background: #f8f9fa;
        padding: 10px;
        margin: 5px 0;
        border-radius: 5px;
        border-left: 4px solid #6c757d;
        font-family: monospace;
      }
      .success {
        background: #d4edda;
        border-left-color: #28a745;
        color: #155724;
      }
      .error {
        background: #f8d7da;
        border-left-color: #dc3545;
        color: #721c24;
      }
      .warning {
        background: #fff3cd;
        border-left-color: #ffc107;
        color: #856404;
      }
      .info {
        background: #d1ecf1;
        border-left-color: #17a2b8;
        color: #0c5460;
      }
      button {
        padding: 12px 20px;
        margin: 10px 5px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
      }
      button:hover {
        background: #0056b3;
      }
      button:disabled {
        background: #6c757d;
        cursor: not-allowed;
      }
      .status-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
      }
      .status-connected {
        background: #28a745;
      }
      .status-disconnected {
        background: #dc3545;
      }
      .status-syncing {
        background: #ffc107;
        animation: pulse 1s infinite;
      }
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
      h1 {
        color: #333;
        text-align: center;
      }
      h2 {
        color: #495057;
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 10px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üîß –§–∏–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –±—é–¥–∂–µ—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h1>

      <div class="test-section">
        <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <button onclick="runFullDiagnostic()">–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
        <button onclick="testOperationFlow()">–¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏</button>
        <button onclick="testSyncBetweenDevices()">–¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</button>
        <button onclick="clearAllData()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
      </div>

      <div class="test-section">
        <h2>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
        <div id="systemStatus">
          <div>
            üî• Firebase:
            <span class="status-indicator status-disconnected"></span
            ><span id="firebaseStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
          </div>
          <div>
            üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
            <span class="status-indicator status-disconnected"></span
            ><span id="authStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
          </div>
          <div>
            üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
            <span class="status-indicator status-disconnected"></span
            ><span id="dbStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
          </div>
          <div>
            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º–µ–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
            <span class="status-indicator status-disconnected"></span
            ><span id="familyStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
          </div>
        </div>
      </div>

      <div class="test-section">
        <h2>üìù –ñ—É—Ä–Ω–∞–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</h2>
        <div id="results"></div>
      </div>
    </div>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <!-- App scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/cloud-storage.js"></script>
    <script src="js/app.js"></script>

    <script>
      function log(message, type = "info") {
        const results = document.getElementById("results");
        const div = document.createElement("div");
        div.className = `log ${type}`;
        div.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
        results.appendChild(div);
        results.scrollTop = results.scrollHeight;
        console.log(`[${type.toUpperCase()}] ${message}`);
      }

      function updateStatus(elementId, connected, text) {
        const element = document.getElementById(elementId);
        const indicator = element.previousElementSibling;

        indicator.className = `status-indicator ${
          connected ? "status-connected" : "status-disconnected"
        }`;
        element.textContent = text;
      }

      async function runFullDiagnostic() {
        log("üîç === –ù–ê–ß–ò–ù–ê–ï–ú –ü–û–õ–ù–£–Æ –î–ò–ê–ì–ù–û–°–¢–ò–ö–£ ===", "info");

        // Reset all statuses
        updateStatus("firebaseStatus", false, "–ü—Ä–æ–≤–µ—Ä–∫–∞...");
        updateStatus("authStatus", false, "–ü—Ä–æ–≤–µ—Ä–∫–∞...");
        updateStatus("dbStatus", false, "–ü—Ä–æ–≤–µ—Ä–∫–∞...");
        updateStatus("familyStatus", false, "–ü—Ä–æ–≤–µ—Ä–∫–∞...");

        // 1. Check Firebase loading
        log("1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É Firebase SDK...", "info");
        if (typeof firebase === "undefined") {
          log("‚ùå Firebase SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!", "error");
          updateStatus("firebaseStatus", false, "SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω");
          return;
        }
        log("‚úÖ Firebase SDK –∑–∞–≥—Ä—É–∂–µ–Ω", "success");

        // 2. Check Firebase initialization
        log("2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é Firebase...", "info");
        try {
          const app = firebase.app();
          log(`‚úÖ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: ${app.name}`, "success");
          updateStatus("firebaseStatus", true, "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
        } catch (error) {
          log(`‚ùå Firebase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: ${error.message}`, "error");
          updateStatus("firebaseStatus", false, "–ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
          return;
        }

        // 3. Test authentication
        log("3Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é...", "info");
        try {
          const auth = firebase.auth();

          // Check if already signed in
          if (auth.currentUser) {
            log(`‚úÖ –£–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: ${auth.currentUser.uid}`, "success");
            updateStatus("authStatus", true, "–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");
          } else {
            log("üîê –í—ã–ø–æ–ª–Ω—è–µ–º –∞–Ω–æ–Ω–∏–º–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é...", "info");
            await auth.signInAnonymously();
            log(
              `‚úÖ –ê–Ω–æ–Ω–∏–º–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: ${auth.currentUser.uid}`,
              "success"
            );
            updateStatus("authStatus", true, "–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");
          }
        } catch (error) {
          log(`‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ${error.message}`, "error");
          updateStatus("authStatus", false, "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");
          return;
        }

        // 4. Test database connection
        log("4Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...", "info");
        try {
          const database = firebase.database();
          const testRef = database.ref("diagnostic/connection-test");

          const testData = {
            timestamp: Date.now(),
            message: "Connection test",
            userAgent: navigator.userAgent,
          };

          await testRef.set(testData);
          log("‚úÖ –ó–∞–ø–∏—Å—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–∞", "success");

          const snapshot = await testRef.once("value");
          const data = snapshot.val();

          if (data && data.timestamp === testData.timestamp) {
            log("‚úÖ –ß—Ç–µ–Ω–∏–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ", "success");
            updateStatus("dbStatus", true, "–ü–æ–¥–∫–ª—é—á–µ–Ω–∞");
          } else {
            log("‚ùå –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏", "error");
            updateStatus("dbStatus", false, "–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è");
          }

          // Clean up
          await testRef.remove();
          log("üßπ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã", "info");
        } catch (error) {
          log(`‚ùå –û—à–∏–±–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö: ${error.message}`, "error");
          updateStatus("dbStatus", false, "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è");
          return;
        }

        // 5. Test family data path
        log("5Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–µ–º–µ–π–Ω—ã–π –ø—É—Ç—å –¥–∞–Ω–Ω—ã—Ö...", "info");
        try {
          const database = firebase.database();
          const familyRef = database.ref(
            "families/artur-valeria-budget/diagnostic"
          );

          const familyTestData = {
            timestamp: Date.now(),
            message: "Family path test",
            device: navigator.platform,
          };

          await familyRef.set(familyTestData);
          log("‚úÖ –ó–∞–ø–∏—Å—å –ø–æ —Å–µ–º–µ–π–Ω–æ–º—É –ø—É—Ç–∏ —É—Å–ø–µ—à–Ω–∞", "success");

          const snapshot = await familyRef.once("value");
          const data = snapshot.val();

          if (data && data.timestamp === familyTestData.timestamp) {
            log("‚úÖ –ß—Ç–µ–Ω–∏–µ —Å–µ–º–µ–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ", "success");
            updateStatus("familyStatus", true, "–î–æ—Å—Ç—É–ø–Ω—ã");
          } else {
            log("‚ùå –°–µ–º–µ–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ", "error");
            updateStatus("familyStatus", false, "–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è");
          }

          // Clean up
          await familyRef.remove();
          log("üßπ –°–µ–º–µ–π–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã", "info");
        } catch (error) {
          log(`‚ùå –û—à–∏–±–∫–∞ —Å–µ–º–µ–π–Ω–æ–≥–æ –ø—É—Ç–∏: ${error.message}`, "error");
          updateStatus("familyStatus", false, "–û—à–∏–±–∫–∞ –ø—É—Ç–∏");
          return;
        }

        // 6. Test EnhancedStorage
        log("6Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º EnhancedStorage...", "info");
        if (typeof EnhancedStorage !== "undefined") {
          try {
            const status = EnhancedStorage.getStatus();
            log(
              `üìä EnhancedStorage —Å—Ç–∞—Ç—É—Å: –ø–æ–¥–∫–ª—é—á–µ–Ω–æ=${status.cloudConnected}`,
              "info"
            );

            if (status.cloudConnected) {
              log("‚úÖ EnhancedStorage –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –æ–±–ª–∞–∫—É", "success");
            } else {
              log("‚ö†Ô∏è EnhancedStorage —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ", "warning");
            }
          } catch (error) {
            log(`‚ùå –û—à–∏–±–∫–∞ EnhancedStorage: ${error.message}`, "error");
          }
        } else {
          log("‚ùå EnhancedStorage –Ω–µ –Ω–∞–π–¥–µ–Ω", "error");
        }

        log("üéâ === –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê ===", "success");
      }

      async function testOperationFlow() {
        log("üí∞ === –¢–ï–°–¢ –î–û–ë–ê–í–õ–ï–ù–ò–Ø –û–ü–ï–†–ê–¶–ò–ò ===", "info");

        try {
          // Check if app is available
          if (typeof BudgetApp === "undefined") {
            log("‚ùå BudgetApp –Ω–µ –Ω–∞–π–¥–µ–Ω", "error");
            return;
          }

          log("üì± –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...", "info");
          const app = new BudgetApp();
          await new Promise((resolve) => setTimeout(resolve, 1000)); // Wait for initialization

          log("üí∏ –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é...", "info");
          const testOperation = {
            amount: "100.50",
            person: "artur",
            category: "–∑–∞—Ä–ø–ª–∞—Ç–∞",
            description: "–¢–µ—Å—Ç–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏",
            date: new Date().toISOString().split("T")[0],
          };

          log(
            `üìã –î–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: ${JSON.stringify(testOperation, null, 2)}`,
            "info"
          );

          await app.addOperation("income", testOperation);
          log("‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!", "success");

          log(
            `üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: ${app.data.operations.length}`,
            "info"
          );

          // Check if it appears in Firebase
          log("üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤ Firebase...", "info");
          await new Promise((resolve) => setTimeout(resolve, 2000)); // Wait for sync

          const database = firebase.database();
          const operationsRef = database.ref(
            "families/artur-valeria-budget/budgetData/operations"
          );
          const snapshot = await operationsRef.once("value");
          const firebaseOperations = snapshot.val();

          if (
            firebaseOperations &&
            Object.keys(firebaseOperations).length > 0
          ) {
            log(
              `‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–π–¥–µ–Ω—ã –≤ Firebase: ${
                Object.keys(firebaseOperations).length
              }`,
              "success"
            );
          } else {
            log("‚ö†Ô∏è –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ Firebase", "warning");
          }
        } catch (error) {
          log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏: ${error.message}`, "error");
          console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:", error);
        }
      }

      async function testSyncBetweenDevices() {
        log("üîÑ === –¢–ï–°–¢ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –ú–ï–ñ–î–£ –£–°–¢–†–û–ô–°–¢–í–ê–ú–ò ===", "info");

        try {
          const database = firebase.database();

          // Simulate device 1 writing data
          log("üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 1: –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ...", "info");
          const device1Data = {
            timestamp: Date.now(),
            device: "Desktop-Chrome",
            operation: {
              id: Date.now(),
              type: "income",
              amount: 500,
              person: "artur",
              description: "Sync test from device 1",
            },
          };

          await database
            .ref("families/artur-valeria-budget/sync-test/device1")
            .set(device1Data);
          log("‚úÖ Device 1 –∑–∞–ø–∏—Å–∞–ª –¥–∞–Ω–Ω—ã–µ", "success");

          // Wait a moment
          await new Promise((resolve) => setTimeout(resolve, 1000));

          // Simulate device 2 reading data
          log("üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 2: –ß–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ...", "info");
          const snapshot = await database
            .ref("families/artur-valeria-budget/sync-test/device1")
            .once("value");
          const readData = snapshot.val();

          if (readData && readData.timestamp === device1Data.timestamp) {
            log("‚úÖ Device 2 —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–ª –¥–∞–Ω–Ω—ã–µ –æ—Ç Device 1", "success");
            log("üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!", "success");
          } else {
            log("‚ùå Device 2 –Ω–µ —Å–º–æ–≥ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç Device 1", "error");
          }

          // Clean up
          await database
            .ref("families/artur-valeria-budget/sync-test")
            .remove();
          log("üßπ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω—ã", "info");
        } catch (error) {
          log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ${error.message}`, "error");
        }
      }

      async function clearAllData() {
        if (
          !confirm(
            "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!"
          )
        ) {
          return;
        }

        log("üóëÔ∏è === –û–ß–ò–°–¢–ö–ê –í–°–ï–• –î–ê–ù–ù–´–• ===", "warning");

        try {
          // Clear Firebase
          log("‚òÅÔ∏è –û—á–∏—â–∞–µ–º Firebase...", "info");
          const database = firebase.database();
          await database.ref("families/artur-valeria-budget").remove();
          log("‚úÖ Firebase –æ—á–∏—â–µ–Ω", "success");

          // Clear localStorage
          log("üíæ –û—á–∏—â–∞–µ–º localStorage...", "info");
          localStorage.removeItem("budgetAppData");
          log("‚úÖ localStorage –æ—á–∏—â–µ–Ω", "success");

          log("üéâ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã!", "success");
        } catch (error) {
          log(`‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏: ${error.message}`, "error");
        }
      }

      // Auto-run basic status check on load
      window.addEventListener("load", () => {
        setTimeout(() => {
          log("üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...", "info");
          runFullDiagnostic();
        }, 1000);
      });
    </script>
  </body>
</html>
